<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>BattingRatings.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ootp-ai</a> &gt; <a href="index.source.html" class="el_package">com.github.lstephen.ootp.ai.player.ratings</a> &gt; <span class="el_source">BattingRatings.java</span></div><h1>BattingRatings.java</h1><pre class="source lang-java linenums">package com.github.lstephen.ootp.ai.player.ratings;

import com.github.lstephen.ootp.ai.site.Site;

import com.fasterxml.jackson.annotation.JacksonInject;
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonTypeInfo;

import com.github.lstephen.ootp.extract.html.rating.Rating;
import com.github.lstephen.ootp.extract.html.rating.Scale;

import com.google.common.base.Objects;
import com.google.common.base.Optional;
import com.google.common.base.Preconditions;

import org.apache.commons.lang3.builder.EqualsBuilder;
import org.apache.commons.lang3.builder.HashCodeBuilder;

/**
 *
 * @author lstephen
 */
public final class BattingRatings&lt;T&gt; {

    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME)
    private final Scale&lt;T&gt; scale;

    private final Rating&lt;T, ? extends Scale&lt;T&gt;&gt; contact;

    private final Rating&lt;T, ?&gt; gap;

    private final Rating&lt;T, ?&gt; power;

    private final Rating&lt;T, ?&gt; eye;

    private final Rating&lt;T, ?&gt; k;

<span class="fc" id="L39">    private BattingRatings(Builder&lt;T&gt; builder) {</span>
<span class="fc" id="L40">        Preconditions.checkNotNull(builder.scale);</span>
<span class="fc" id="L41">        Preconditions.checkNotNull(builder.contact);</span>
<span class="fc" id="L42">        Preconditions.checkNotNull(builder.gap);</span>
<span class="fc" id="L43">        Preconditions.checkNotNull(builder.power);</span>
<span class="fc" id="L44">        Preconditions.checkNotNull(builder.eye);</span>

<span class="fc" id="L46">        this.scale = builder.scale;</span>
<span class="fc" id="L47">        this.contact = builder.contact;</span>
<span class="fc" id="L48">        this.gap = builder.gap;</span>
<span class="fc" id="L49">        this.power = builder.power;</span>
<span class="fc" id="L50">        this.eye = builder.eye;</span>
<span class="fc" id="L51">        this.k = builder.k;</span>
<span class="fc" id="L52">    }</span>

    public Integer getContact() {
<span class="fc" id="L55">        return contact.normalize().get();</span>
    }

    public Integer getGap() {
<span class="fc" id="L59">        return gap.normalize().get();</span>
    }

    public Integer getPower() {
<span class="fc" id="L63">        return power.normalize().get();</span>
    }

    public Integer getEye() {
<span class="fc" id="L67">        return eye.normalize().get();</span>
    }

    public Optional&lt;Integer&gt; getK() {
<span class="pc bpc" id="L71" title="1 of 2 branches missed.">        return k == null</span>
<span class="pc" id="L72">            ? Optional.&lt;Integer&gt;absent()</span>
<span class="fc" id="L73">            : Optional.of(k.normalize().get());</span>
    }

    public BattingRatings&lt;T&gt; build() {
<span class="nc" id="L77">        return this;</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L82">        return Objects</span>
<span class="nc" id="L83">            .toStringHelper(this)</span>
<span class="nc" id="L84">            .add(&quot;scale&quot;, scale)</span>
<span class="nc" id="L85">            .add(&quot;contact&quot;, contact)</span>
<span class="nc" id="L86">            .add(&quot;gap&quot;, gap)</span>
<span class="nc" id="L87">            .add(&quot;power&quot;, power)</span>
<span class="nc" id="L88">            .add(&quot;eye&quot;, eye)</span>
<span class="nc" id="L89">            .toString();</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="pc bpc" id="L94" title="1 of 2 branches missed.">        if (obj == null) {</span>
<span class="fc" id="L95">            return false;</span>
        }

<span class="nc bnc" id="L98" title="All 2 branches missed.">        if (obj == this) {</span>
<span class="nc" id="L99">            return true;</span>
        }

<span class="nc bnc" id="L102" title="All 2 branches missed.">        if (getClass() != obj.getClass()) {</span>
<span class="nc" id="L103">            return false;</span>
        }

<span class="nc" id="L106">        BattingRatings&lt;?&gt; rhs = BattingRatings.class.cast(obj);</span>

<span class="nc" id="L108">        return new EqualsBuilder()</span>
<span class="nc" id="L109">            .append(contact, rhs.contact)</span>
<span class="nc" id="L110">            .append(gap, rhs.gap)</span>
<span class="nc" id="L111">            .append(power, rhs.power)</span>
<span class="nc" id="L112">            .append(eye, rhs.eye)</span>
<span class="nc" id="L113">            .isEquals();</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L118">        return new HashCodeBuilder()</span>
<span class="nc" id="L119">            .append(contact)</span>
<span class="nc" id="L120">            .append(gap)</span>
<span class="nc" id="L121">            .append(power)</span>
<span class="nc" id="L122">            .append(eye)</span>
<span class="nc" id="L123">            .toHashCode();</span>
    }

    public static &lt;T&gt; Builder&lt;T&gt; builder(Scale&lt;T&gt; scale) {
<span class="fc" id="L127">        return Builder.create(scale);</span>
    }

    @JsonCreator
    private static &lt;T&gt; BattingRatings&lt;T&gt; build(Builder&lt;T&gt; builder) {
<span class="fc" id="L132">        return new BattingRatings&lt;T&gt;(builder);</span>
    }

    public static final class Builder&lt;T&gt; {

        private final Scale&lt;T&gt; scale;

        private Rating&lt;T, ? extends Scale&lt;T&gt;&gt; contact;

        private Rating&lt;T, ? extends Scale&lt;T&gt;&gt; gap;

        private Rating&lt;T, ? extends Scale&lt;T&gt;&gt; power;

        private Rating&lt;T, ? extends Scale&lt;T&gt;&gt; eye;

        private Rating&lt;T, ? extends Scale&lt;T&gt;&gt; k;

<span class="fc" id="L149">        private Builder(Scale&lt;T&gt; scale) {</span>
<span class="fc" id="L150">            this.scale = scale;</span>
<span class="fc" id="L151">        }</span>

        @JsonCreator
        private Builder(
<span class="fc" id="L155">            @JsonProperty(&quot;scale&quot;) Scale&lt;T&gt; scale, @JacksonInject Site site) {</span>

<span class="pc bpc" id="L157" title="1 of 2 branches missed.">            this.scale = scale == null</span>
<span class="pc" id="L158">                ? (Scale&lt;T&gt;) site.getAbilityRatingScale()</span>
                : scale;
<span class="fc" id="L160">        }</span>

        public Builder&lt;T&gt; contact(Rating&lt;T, ? extends Scale&lt;T&gt;&gt; contact) {
<span class="fc" id="L163">            this.contact = contact;</span>
<span class="fc" id="L164">            return this;</span>
        }

        @JsonProperty(&quot;contact&quot;)
        public Builder&lt;T&gt; contact(String s) {
<span class="fc" id="L169">            return contact(scale.parse(s));</span>
        }

        public Builder&lt;T&gt; contact(T value) {
<span class="nc" id="L173">            return contact(Rating.create(value, scale));</span>
        }

        public Builder&lt;T&gt; gap(Rating&lt;T, ?&gt; gap) {
<span class="fc" id="L177">            this.gap = gap;</span>
<span class="fc" id="L178">            return this;</span>
        }

        @JsonProperty(&quot;gap&quot;)
        public Builder&lt;T&gt; gap(String s) {
<span class="fc" id="L183">            return gap(scale.parse(s));</span>
        }

        public Builder&lt;T&gt; gap(T value) {
<span class="nc" id="L187">            return gap(Rating.create(value, scale));</span>
        }

        public Builder&lt;T&gt; power(Rating&lt;T, ?&gt; power) {
<span class="fc" id="L191">            this.power = power;</span>
<span class="fc" id="L192">            return this;</span>
        }

        @JsonProperty(&quot;power&quot;)
        public Builder&lt;T&gt; power(String s) {
<span class="fc" id="L197">            return power(scale.parse(s));</span>
        }

        public Builder&lt;T&gt; power(T value) {
<span class="nc" id="L201">            return power(Rating.create(value, scale));</span>
        }

        public Builder&lt;T&gt; eye(Rating&lt;T, ?&gt; eye) {
<span class="fc" id="L205">            this.eye = eye;</span>
<span class="fc" id="L206">            return this;</span>
        }

        @JsonProperty(&quot;eye&quot;)
        public Builder&lt;T&gt; eye(String s) {
<span class="fc" id="L211">            return eye(scale.parse(s));</span>
        }

        public Builder&lt;T&gt; eye(T value) {
<span class="nc" id="L215">            return eye(Rating.create(value, scale));</span>
        }

        public Builder&lt;T&gt; k(Rating&lt;T, ?&gt; k) {
<span class="fc" id="L219">            this.k = k;</span>
<span class="fc" id="L220">            return this;</span>
        }

        @JsonProperty(&quot;k&quot;)
        public Builder&lt;T&gt; k(String s) {
<span class="pc bpc" id="L225" title="2 of 4 branches missed.">            return s == null || s.equals(&quot;null&quot;)</span>
                ? this
<span class="fc" id="L227">                : k(scale.parse(s));</span>
        }

        public Builder&lt;T&gt; k(T value) {
<span class="nc bnc" id="L231" title="All 2 branches missed.">            return value == null ? this : k(Rating.create(value, scale));</span>
        }


        public BattingRatings&lt;T&gt; build() {
<span class="fc" id="L236">            return BattingRatings.build(this);</span>
        }

        private static &lt;T&gt; Builder&lt;T&gt; create(Scale&lt;T&gt; scale) {
<span class="fc" id="L240">            return new Builder&lt;T&gt;(scale);</span>
        }

    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>